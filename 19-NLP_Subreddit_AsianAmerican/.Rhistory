# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
# "document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topic")
head(analyze)
unique(analyze$max_topic)
lda_document$max_topic <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=2,
FUN=which.max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
# "document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topic")
head(analyze)
unique(analyze$max_topic)
lda_document$max_topic <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=0,
FUN=which.max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
# "document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topic")
head(analyze)
unique(analyze$max_topic)
lda_document$max_topic <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=which.max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
# "document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topic")
head(analyze)
unique(analyze$max_topic)
analyze <- select(merged,
"document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topic")
head(analyze)
unique(analyze$max_topic)
lda_document$max_topic <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=which.max)]
lda_document$max_topic <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=which.max)]
unique(lda_document)
unique(lda_document$max_topic)
lda_document$max_topic <-
colnames(lda_document[1:5])[apply(X=lda_document,
MARGIN=1,
FUN=which.max)]
unique(lda_document$max_topic)
lda_document$max_topic <-
colnames(lda_document)[apply(X=lda_document,
MARGIN=1,
FUN=which.max)]
unique(lda_document$max_topic)
# As opposed to one topic column
# NOTE: gamma values are to fill in the new columns
lda_document <- spread(lda_document_topics,
topic, # the col to spread
gamma) # fill in the new cols with gamma
dim(lda_document)
head(lda_document)
head(lda_document[2:5])
lda_document$max_topic <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=which.max)]
unique(lda_document$max_topic)
?which.max()
lda_document <- spread(lda_document_topics,
topic, # the col to spread
gamma) # fill in the new cols with gamma
dim(lda_document)
head(lda_document)
head(lda_document[2:5])
# Best Topic Match ----------------------------------
# create column for the topic that has the
# greatest contribution to that document
which_above <- function(row) {
values_above = c()
for (n in row) {
if (n > 0.3) {
values_above = c(values_above, n)
}
}
return (values_above)
}
lda_document$max_topics <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=which_above)]
unique(lda_document$max_topics)
lda_document$max_topics <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=which_above)]
unique(lda_document$max_topics)
unique(lda_document$max_topics)
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (values_above)
}
testing <- c(1,3,4)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (values_above)
}
testing <- c(1,3,4,5)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
testing <- c(1,3,4,5)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:5) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
testing <- c(1,3,4,5)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
testing <- c(1,3,5,4)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
testing <- c(5,3,9,4)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
testing <- c(9,3,1,4)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
testing <- c(5,3,1,9)
print(my_max(testing))
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
lda_document$max_topics <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=my_max)]
unique(lda_document$max_topics)
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topic")
head(analyze)
unique(analyze$max_topic)
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topic)
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topics)
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 1:4) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column + 1)
}
lda_document$max_topics <-
colnames(lda_document[2:5])[apply(X=lda_document,
MARGIN=1,
FUN=my_max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"2-culture"="1",
"3-racsm_v_chinese"="2",
"4-movies"="3",
"5-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topics)
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 2:5) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
lda_document$max_topics <-
colnames(lda_document)[apply(X=lda_document,
MARGIN=1,
FUN=my_max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"2-culture"="1",
"3-racsm_v_chinese"="2",
"4-movies"="3",
"5-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topics)
# Ex: topic1, topic2, topic3
# As opposed to one topic column
# NOTE: gamma values are to fill in the new columns
lda_document <- spread(lda_document_topics,
topic, # the col to spread
gamma) # fill in the new cols with gamma
dim(lda_document)
head(lda_document)
head(lda_document[2:5])
# Best Topic Match ----------------------------------
# create column for the topic that has the
# greatest contribution to that document
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 2:5) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
lda_document$max_topics <-
colnames(lda_document)[apply(X=lda_document,
MARGIN=1,
FUN=my_max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"2-culture"="1",
"3-racsm_v_chinese"="2",
"4-movies"="3",
"5-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topics)
# GAMMA -------------
# How much does each topic contribute to each document?
# --> Use GAMMA statistic
# (As opposed to how much each word contributes
# to each topic, which is beta)
lda_document_topics <- tidy(lda,
matrix="gamma")
head(lda_document_topics)
tail(lda_document_topics)
# write.csv(lda_document_topics,
#           file = paste("(new)topic_gamma_match",
#                        k,
#                        ".csv",
#                        sep = ""))
# same as nrow() and ncol()
dim(lda_document_topics)
# Have each topic as a different column --------------
# Ex: topic1, topic2, topic3
# As opposed to one topic column
# NOTE: gamma values are to fill in the new columns
lda_document <- spread(lda_document_topics,
topic, # the col to spread
gamma) # fill in the new cols with gamma
dim(lda_document)
head(lda_document)
head(lda_document[2:5])
# Best Topic Match ----------------------------------
# create column for the topic that has the
# greatest contribution to that document
my_max <- function(row) {
top_value = 0
top_column = 0
for (i in 2:5) {
if (row[i] > top_value) {
top_column = i
top_value = row[i]
}
}
return (top_column)
}
lda_document$max_topics <-
colnames(lda_document)[apply(X=lda_document,
MARGIN=1,
FUN=my_max)]
# join tables together --------------------------------
dt1 <- data.table(lda_document,
key = "document")
dt2 <- data.table(df,
key = "doc_id")
merged <- dt1[dt2]
dim(merged)
colnames(merged)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"2-culture"="1",
"3-racsm_v_chinese"="2",
"4-movies"="3",
"5-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topics)
# select only the columns you want to work with
analyze <- select(merged,
"document",
"1-culture"="1",
"2-racsm_v_chinese"="2",
"3-movies"="3",
"4-racsm_in_time"="4",
"max_topics")
head(analyze)
unique(analyze$max_topics)
head(analyze, n = 10)
